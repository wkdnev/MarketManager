@inherits LayoutComponentBase
@inject NavigationManager NavigationManager

<div class="page">
    <!-- Sidebar with Navigation Menu -->
    <div class="sidebar" id="sidebar">
        <NavMenu />
    </div>

    <!-- Main Content Area -->
    <main id="mainContent">
        <!-- Modern Top Header -->
        <div class="top-header">
            <div class="header-left">
                <button class="sidebar-toggle" id="sidebarToggle" onclick="toggleSidebar()" title="Toggle sidebar">
                    <span class="hamburger-icon">â˜°</span>
                </button>
                <button class="mobile-menu-toggle" onclick="document.querySelector('.navbar-toggler').click()">
                    <i class="bi bi-list"></i>
                </button>
                <div class="search-bar">
                    <i class="bi bi-search"></i>
                    <input type="text" placeholder="Search eBay..." />
                </div>
            </div>
            <div class="header-right">
                <div class="notification-bell">
                    <span class="bell-icon">ðŸ””ï¸Ž</span>
                    <span class="notification-badge">0</span>
                </div>
                <div class="user-profile">
                    <button class="user-profile-btn">
                        <div class="user-avatar">
                            <span class="avatar-icon">â—¯</span>
                        </div>
                        <span class="user-name">eBay Manager</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content Section -->
        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

<!-- Error UI for Unhandled Exceptions -->
<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">ðŸ—™</a>
</div>

<script>
    function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('mainContent');

        sidebar.classList.toggle('collapsed');
        mainContent.classList.toggle('expanded');

        // Save state to localStorage
        localStorage.setItem('sidebarCollapsed', sidebar.classList.contains('collapsed'));
    }

    // Restore sidebar state on page load
    document.addEventListener('DOMContentLoaded', function() {
        const isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
        if (isCollapsed) {
            toggleSidebar();
        }
    });
</script>
